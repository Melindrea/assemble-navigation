# Menu Item API

## What is a menu item?

Menu Items are objects that contain all the elements needed to create a working link in a menu or other navigational element. They can include:

- url: the full path component of a URL, relative to site root
- title: Text that appears in the link
	- Can be set in front matter with `menu-title`
	- Derived from page's `title`
	- or derived from file name
- data: metadata related to the menu item
	- come's from frontmatter
- items: an array of zero or more child menu items 

Additional Variables

- linkId: a unique id for the menu item generated from it's menu and path
- isCurrent (False): is this menu item the currently selected page
- isActive (False): is the menu item a parent (grand-parent, etc.) of the currently selected page.

## Creating a menu item
There are many circumstances when a menu item is created.

- A view file is passed into Navigation via an `onLoad` middleware
- A stub menu item is needed to create a parent item for a view item. Views are passed into the middleware in an undetermined order, meaning that the parent menu item does not yet exist. Navigation will create a stub item as a placeholder for the child item until the parent view is processed, at which point the data structures are merged.
- MenuItems that link to non-view content; that is, content not generated by Assemble. These might be pages on outside sites, or downloadable files like PDFs.
- *[possible future feature]* Stub items are created via the config before the `onLaod` middleware runs. These stubs can serve as a means to create a default order for menu items.


Create a menu item by passing an Assemble renderable view to the MenuItem constructor.

```js
var mi = new MenuItem(myView);
```

## API

### .getAssignedMenus()
Returns an array of menus the menu item belongs to as defined in the page's front matter. If no menu has been assigned, it returns false.

### .menuPath()
Get or set the menu item's path in the navigation hierarchy. This is automatically generated base on the file path for the menuItem but can be overwritten if you need the item to appear elsewhere in the navigation.
Returns an array, each array item should match a directory in the hierarchy. Items in the root directory have `.` as the first and only array item.

```js
mi.menuPath();
//=> ['products', 'productType']
homepage.menuPath();
//=> ['.']

// move contact from 'about/contact.html' to root
contact.menuPath();
//=> ['about']
contact.menuPath(['.']);
//=> ['.']
```

### .addItem(item)
Adds the child menu item to the parent menu item's `items` array. If the child has a filename matching `index.*`, it will be placed at index 0. All other items be given index's >=1.

### .updateItem(item)
Deeply merges the a new menu item onto an existing menu item. Due to the unpredictable order of page processing in Assemble, child menu items might be added to the navigation before their parent's. This requires the creation of stub menu items to hold the child until the parent item comes along, at which point `updateItem()` is called to merge in the properties.  